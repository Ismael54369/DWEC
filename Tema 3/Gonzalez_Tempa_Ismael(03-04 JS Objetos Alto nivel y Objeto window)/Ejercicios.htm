<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios Objeto Window</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script type="text/javascript">
        let nuevaVentana;
        let intervalId = null;
        let zoomLevel = 15;
        const GEO_API_KEY = "PON_AQUI_TU_API_KEY"; // IMPORTANTE: Reemplaza con tu API Key de Google

        function crearVentanaEj1() {
            const altura = parseInt(prompt("Introduce la altura de la nueva ventana"));
            const ancho = parseInt(prompt("Introduce el ancho de la nueva ventana"));

            if (isNaN(altura) || isNaN(ancho) || altura <= 0 || ancho <= 0) {
                document.getElementById("text").innerHTML = "Introduce valores validos porfavor.";
            } else {
                nuevaVentana = window.open("nueva.html", "nueva", `height=${altura},width=${ancho}`);
            }
        }

        function cerrarVentanaComun() {
            if (nuevaVentana && !nuevaVentana.closed) {
                nuevaVentana.close();
                document.getElementById("text").innerHTML = "La ventana ha sido cerrada.";
            } else {
                document.getElementById("text").innerHTML = "No hay ninguna ventana abierta para cerrar.";
            }
        }

        function estaAbiertaEj3() {
            if (!nuevaVentana || nuevaVentana.closed) {
                document.getElementById("text").innerHTML = "La ventana está cerrada o no se ha creado.";
            } else {
                document.getElementById("text").innerHTML = "La ventana está abierta.";
            }
        }

        function crearVentanaEj4() {
            const url = prompt("Introduce la URL de la nueva ventana (ej: https://es.wikipedia.org/wiki/Wikipedia:Portada)");
            if (!url) {
                document.getElementById("text").innerHTML = "Operación cancelada. Por favor, introduce una URL válida.";
            } else {
                nuevaVentana = window.open(url, "nueva", "height=400,width=600");
                document.getElementById("text").innerHTML = `Propiedades de la nueva ventana:<br>
                - <b>Name:</b> ${nuevaVentana.name}<br>
                - <b>Length (frames):</b> ${nuevaVentana.length}<br>
                - <b>Location:</b> ${nuevaVentana.location}`;
            }
        }
            
        function ejecutarEj5() { 
            const alerta = window.alert("ALERTA, te están robando el banco");
            const confirmacion = window.confirm("¿Estás de acuerdo?");
            if (confirmacion) {
                document.getElementById("text").textContent = "Estás de acuerdo.";
            } else {
                document.getElementById("text").textContent = "No estás de acuerdo.";
            }
        }

        function ejecutarEj6() { 
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            } else {
                function dihola() {
                document.getElementById("text").textContent += "Hola ";
            }
                intervalId = setInterval(dihola, 500);
                document.getElementById("text").textContent = "Intervalo iniciado. ";
            }
        }

        function parar() {
            clearInterval(intervalId);
            intervalId = null;
            document.getElementById("text").textContent = "Intervalo detenido.";
        }

        function ejecutarEj7() { 
            const date = new Date();
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            } else {
                function hora() {
                const date = new Date();
                document.getElementById("text").textContent = "Hola son las " + date.toLocaleTimeString();
            }
                intervalId = setInterval(hora, 1000);
                document.getElementById("text").textContent = "Intervalo iniciado. ";
            }
         }

        // --- Funciones para los ejercicios 8, 9 y 10 ---
        let colorInterval; // Variable global para el intervalo de cambio de color

        function setColor(color1 = "yellow", color2 = "pink") {
            let x = document.body;
            // Usamos el operador ternario para un código más limpio
            x.style.backgroundColor = x.style.backgroundColor === color1 ? color2 : color1;
        }

        function stopColor() {
            clearInterval(colorInterval);
            colorInterval = null;
            document.body.style.backgroundColor = ''; // Restablece el color de fondo
            document.getElementById("text").textContent = "Intervalo de color detenido.";
        }

        function iniciarIntervalo8() {
            if (colorInterval) clearInterval(colorInterval); // Limpia el intervalo anterior si existe
            colorInterval = setInterval(setColor, 500);
            document.getElementById("text").textContent = "Cambiando de color cada 500ms.";
        }

        function iniciarIntervalo9() {
            if (colorInterval) clearInterval(colorInterval);
            const intervalo = parseInt(prompt("Introduce el intervalo en milisegundos:"));
            if (isNaN(intervalo) || intervalo <= 0) {
                alert("Por favor, introduce un número válido mayor que cero.");
                return;
            }
            colorInterval = setInterval(setColor, intervalo);
            document.getElementById("text").textContent = `Cambiando de color cada ${intervalo}ms.`;
        }

        function iniciarIntervalo10() {
            if (colorInterval) clearInterval(colorInterval);
            const input = prompt("Introduce intervalo y dos colores (ej: 500,red,blue):");
            if (!input) return;

            const partes = input.split(',');
            if (partes.length !== 3 || isNaN(parseInt(partes[0])) || parseInt(partes[0]) <= 0) {
                alert("Formato incorrecto. Usa: milisegundos,color1,color2");
                return;
            }

            const intervalo = parseInt(partes[0]);
            const color1 = partes[1].trim();
            const color2 = partes[2].trim();

            colorInterval = setInterval(() => setColor(color1, color2), intervalo);
            document.getElementById("text").textContent = `Cambiando entre ${color1} y ${color2} cada ${intervalo}ms.`;
        }

        function setupEjercicio(num) {
            const controlesDiv = document.getElementById("controles-ejercicio");
            const titulo = document.getElementById("titulo-ejercicio");
            const textoResultado = document.getElementById("text");
            textoResultado.innerHTML = "";
            let htmlControles = "";

            switch (num) {
                case 1:
                    titulo.textContent = "Ejercicio 1 - Crear Ventana";
                    htmlControles = `<button onclick="crearVentanaEj1()" class="btn btn-primary me-2">Crear ventana</button>`;
                    break;
                case 2:
                    titulo.textContent = "Ejercicio 2 - Cerrar Ventana";
                    htmlControles = `<button onclick="crearVentanaEj1()" class="btn btn-primary me-2">Crear ventana primero</button>
                                     <button onclick="cerrarVentanaComun()" class="btn btn-danger">Cerrar ventana</button>`;
                    break;
                case 3:
                    titulo.textContent = "Ejercicio 3 - ¿Ventana Abierta?";
                    htmlControles = `<button onclick="crearVentanaEj1()" class="btn btn-primary me-2">Crear ventana</button>
                                     <button onclick="estaAbiertaEj3()" class="btn btn-success me-2">¿Está abierta?</button>
                                     <button onclick="cerrarVentanaComun()" class="btn btn-danger">Cerrar ventana</button>`;
                    break;
                case 4:
                    titulo.textContent = "Ejercicio 4 - Propiedades de Ventana";
                    htmlControles = `<button onclick="crearVentanaEj4()" class="btn btn-primary me-2">Crear y ver propiedades</button>
                                     <button onclick="cerrarVentanaComun()" class="btn btn-danger">Cerrar ventana</button>`;
                    break;
                case 5:
                    titulo.textContent = "Ejercicio 5 - Alerta y Confirmación";
                    htmlControles = `<button onclick="ejecutarEj5()" class="btn btn-primary">Alertar</button>`;
                    break;
                case 6:
                    titulo.textContent = "Ejercicio 6 - setInterval y clearInterval";
                    htmlControles = `<button onclick="ejecutarEj6()" class="btn btn-success me-2">Iniciar 'Hola'</button>
                                     <button onclick="parar()" class="btn btn-danger">Detener</button>`;
                    break;
                case 7:
                    titulo.textContent = "Ejercicio 7 - Hora";
                    htmlControles = `<button onclick="ejecutarEj7()" class="btn btn-success me-2">Iniciar recuento de hora</button>
                                     <button onclick="parar()" class="btn btn-danger">Detener</button>`;
                    break;
                case 8:
                    titulo.textContent = "Ejercicio 8";
                    htmlControles = `<button onclick="iniciarIntervalo8()" class="btn btn-success me-2">Start</button>
                                     <button onclick="stopColor()" class="btn btn-danger">Stop</button>`;
                    break;
                case 9:
                    titulo.textContent = "Ejercicio 9";
                    htmlControles = `<button onclick="iniciarIntervalo9()" class="btn btn-success me-2">Start</button>
                                     <button onclick="stopColor()" class="btn btn-danger">Stop</button>`;
                    break;
                case 10:
                    titulo.textContent = "Ejercicio 10";
                    htmlControles = `<button onclick="iniciarIntervalo10()" class="btn btn-success me-2">Start</button>
                                     <button onclick="stopColor()" class="btn btn-danger">Stop</button>`;
                    break;
            }
            controlesDiv.innerHTML = htmlControles;
        }

        function inicializar() {
            setupEjercicio(1);
        }
    </script>
</head>
<body onload="inicializar()">
    <div class="container mt-4">
        <header class="p-3 mb-4 bg-light rounded-3">
            <h1 class="display-5">Ejercicios con el Objeto Window</h1>
            <p class="lead">Selecciona un ejercicio del menú para ver su funcionamiento.</p>
        </header>

        <div class="mb-4">
            <label for="select-ejercicio" class="form-label fw-bold">Seleccionar Ejercicio:</label>
            <select id="select-ejercicio" class="form-select w-auto" onchange="setupEjercicio(parseInt(this.value))">
                <option value="1">Ejercicio 1: Crear Ventana</option>
                <option value="2">Ejercicio 2: Cerrar Ventana</option>
                <option value="3">Ejercicio 3: Comprobar si está abierta</option>
                <option value="4">Ejercicio 4: Propiedades de la ventana</option>
                <option value="5">Ejercicio 5: Alerta y Confirmación</option>
                <option value="6">Ejercicio 6: setInterval y clearInterval</option>
                <option value="7">Ejercicio 7: Hora</option>
                <option value="8">Ejercicio 8</option>
                <option value="9">Ejercicio 9</option>
                <option value="10">Ejercicio 10</option>
            </select>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 id="titulo-ejercicio" class="h4 mb-0"></h2>
            </div>
            <div class="card-body">
                <div id="controles-ejercicio" class="d-flex flex-wrap justify-content-center align-items-center mb-3">
                </div>
                <div class="d-flex justify-content-center mt-3">
                    <p><span id="text" class="fw-bold"></span></p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>