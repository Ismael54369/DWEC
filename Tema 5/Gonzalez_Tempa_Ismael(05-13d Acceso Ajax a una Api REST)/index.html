<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Consulta API PHP</title>
</head>
<body>
    <h1>Consultar API PHP</h1>
    <label for="idInput">ID a buscar:</label>
    <input type="number" id="idInput" placeholder="Ej: 1">
    <button id="btnBuscar">Buscar</button>
    
    <h2>Respuesta:</h2>
    <pre id="respuesta" style="background:#f4f4f4; padding:10px; border:1px solid #ddd;"></pre>

    <script>
        document.getElementById("btnBuscar").addEventListener("click", () => {
            const id = document.getElementById("idInput").value;
            const salida = document.getElementById("respuesta");

            if (!id) {
                salida.textContent = "Introduce un ID.";
                return;
            }

            // Llamada AJAX con fetch al api.php
            fetch("api.php?id=" + encodeURIComponent(id))
                .then(response => response.json())
                .then(data => {
                    // VERSION ESTÉTICA (Ejercicio 1.5)
                    if (data.error) {
                        salida.style.color = "red";
                        salida.textContent = "Error: " + data.error;
                    } else {
                        salida.style.color = "green";
                        // Mostramos el valor limpio
                        salida.textContent = "Resultado: " + JSON.stringify(data.valor);
                    }
                })
                .catch(err => {
                    salida.textContent = "Error de conexión: " + err;
                });
        });
    </script>
</body>
</html>